{"remainingRequest":"C:\\Users\\86152\\Desktop\\casual\\admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\86152\\Desktop\\casual\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\86152\\Desktop\\casual\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\86152\\Desktop\\casual\\admin\\src\\components\\cropper\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\86152\\Desktop\\casual\\admin\\src\\components\\cropper\\index.vue","mtime":1575545426843},{"path":"C:\\Users\\86152\\Desktop\\casual\\admin\\.babelrc","mtime":1575545426802},{"path":"C:\\Users\\86152\\Desktop\\casual\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86152\\Desktop\\casual\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\86152\\Desktop\\casual\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86152\\Desktop\\casual\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Cropper from 'cropperjs';\nimport \"./index.less\";\nimport 'cropperjs/dist/cropper.min.css';\nexport default {\n  name: 'Cropper',\n  props: {\n    src: {\n      type: String,\n      default: ''\n    },\n    preview: {\n      type: Boolean,\n      default: true\n    },\n    moveStep: {\n      type: Number,\n      default: 4\n    },\n    cropButtonText: {\n      type: String,\n      default: '裁剪'\n    }\n  },\n  data: function data() {\n    return {\n      cropper: null,\n      insideSrc: ''\n    };\n  },\n  computed: {\n    imgId: function imgId() {\n      return \"cropper\".concat(this._uid);\n    },\n    previewId: function previewId() {\n      return \"cropper_preview\".concat(this._uid);\n    }\n  },\n  watch: {\n    src: function src(_src) {\n      this.replace(_src);\n    },\n    insideSrc: function insideSrc(src) {\n      this.replace(src);\n    }\n  },\n  methods: {\n    beforeUpload: function beforeUpload(file) {\n      var _this = this;\n\n      var reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onload = function (event) {\n        _this.insideSrc = event.srcElement.result;\n      };\n\n      return false;\n    },\n    replace: function replace(src) {\n      this.cropper.replace(src);\n      this.insideSrc = src;\n    },\n    rotate: function rotate() {\n      this.cropper.rotate(90);\n    },\n    shrink: function shrink() {\n      this.cropper.zoom(-0.1);\n    },\n    magnify: function magnify() {\n      this.cropper.zoom(0.1);\n    },\n    scale: function scale(d) {\n      this.cropper[\"scale\".concat(d)](-this.cropper.getData()[\"scale\".concat(d)]);\n    },\n    move: function move() {\n      var _this$cropper;\n\n      (_this$cropper = this.cropper).move.apply(_this$cropper, arguments);\n    },\n    crop: function crop() {\n      var _this2 = this;\n\n      this.cropper.getCroppedCanvas().toBlob(function (blob) {\n        _this2.$emit('on-crop', blob);\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    this.$nextTick(function () {\n      var dom = document.getElementById(_this3.imgId);\n      _this3.cropper = new Cropper(dom, {\n        preview: \"#\".concat(_this3.previewId),\n        checkCrossOrigin: true\n      });\n    });\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"cropper-wrapper\">\r\n    <div class=\"img-box\">\r\n      <img class=\"cropper-image\" :id=\"imgId\" alt=\"\">\r\n    </div>\r\n    <div class=\"right-con\">\r\n      <div v-if=\"preview\" class=\"preview-box\" :id=\"previewId\"></div>\r\n      <div class=\"button-box\">\r\n        <slot>\r\n          <Upload action=\"image/upload\" :before-upload=\"beforeUpload\">\r\n            <Button style=\"width: 150px;\" type=\"primary\">上传图片</Button>\r\n          </Upload>\r\n        </slot>\r\n        <div v-show=\"insideSrc\">\r\n          <Button type=\"primary\" @click=\"rotate\">\r\n            <Icon type=\"md-refresh\" :size=\"18\"/>\r\n          </Button>\r\n          <Button type=\"primary\" @click=\"shrink\">\r\n            <Icon type=\"md-remove\" :size=\"18\"/>\r\n          </Button>\r\n          <Button type=\"primary\" @click=\"magnify\">\r\n            <Icon type=\"md-add\" :size=\"18\"/>\r\n          </Button>\r\n          <Button type=\"primary\" @click=\"scale('X')\">\r\n            <Icon custom=\"iconfont icon-shuipingfanzhuan\" :size=\"18\"/>\r\n          </Button>\r\n          <Button type=\"primary\" @click=\"scale('Y')\">\r\n            <Icon custom=\"iconfont icon-chuizhifanzhuan\" :size=\"18\"/>\r\n          </Button>\r\n          <Button type=\"primary\" @click=\"move(0, -moveStep)\">\r\n            <Icon type=\"md-arrow-round-up\" :size=\"18\"/>\r\n          </Button>\r\n          <Button type=\"primary\" @click=\"move(-moveStep, 0)\">\r\n            <Icon type=\"md-arrow-round-back\" :size=\"18\"/>\r\n          </Button>\r\n          <Button type=\"primary\" @click=\"move(0, moveStep)\">\r\n            <Icon type=\"md-arrow-round-down\" :size=\"18\"/>\r\n          </Button>\r\n          <Button type=\"primary\" @click=\"move(moveStep, 0)\">\r\n            <Icon type=\"md-arrow-round-forward\" :size=\"18\"/>\r\n          </Button>\r\n          <Button style=\"width: 150px;margin-top: 10px;\" type=\"primary\" @click=\"crop\">{{ cropButtonText }}</Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Cropper from 'cropperjs'\r\nimport './index.less'\r\nimport 'cropperjs/dist/cropper.min.css'\r\nexport default {\r\n  name: 'Cropper',\r\n  props: {\r\n    src: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    preview: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    moveStep: {\r\n      type: Number,\r\n      default: 4\r\n    },\r\n    cropButtonText: {\r\n      type: String,\r\n      default: '裁剪'\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      cropper: null,\r\n      insideSrc: ''\r\n    }\r\n  },\r\n  computed: {\r\n    imgId () {\r\n      return `cropper${this._uid}`\r\n    },\r\n    previewId () {\r\n      return `cropper_preview${this._uid}`\r\n    }\r\n  },\r\n  watch: {\r\n    src (src) {\r\n      this.replace(src)\r\n    },\r\n    insideSrc (src) {\r\n      this.replace(src)\r\n    }\r\n  },\r\n  methods: {\r\n    beforeUpload (file) {\r\n      const reader = new FileReader()\r\n      reader.readAsDataURL(file)\r\n      reader.onload = (event) => {\r\n        this.insideSrc = event.srcElement.result\r\n      }\r\n      return false\r\n    },\r\n    replace (src) {\r\n      this.cropper.replace(src)\r\n      this.insideSrc = src\r\n    },\r\n    rotate () {\r\n      this.cropper.rotate(90)\r\n    },\r\n    shrink () {\r\n      this.cropper.zoom(-0.1)\r\n    },\r\n    magnify () {\r\n      this.cropper.zoom(0.1)\r\n    },\r\n    scale (d) {\r\n      this.cropper[`scale${d}`](-this.cropper.getData()[`scale${d}`])\r\n    },\r\n    move (...argu) {\r\n      this.cropper.move(...argu)\r\n    },\r\n    crop () {\r\n      this.cropper.getCroppedCanvas().toBlob(blob => {\r\n        this.$emit('on-crop', blob)\r\n      })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.$nextTick(() => {\r\n      let dom = document.getElementById(this.imgId)\r\n      this.cropper = new Cropper(dom, {\r\n        preview: `#${this.previewId}`,\r\n        checkCrossOrigin: true\r\n      })\r\n    })\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/components/cropper"}]}