{"remainingRequest":"C:\\Users\\86152\\Desktop\\casual\\iview-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\86152\\Desktop\\casual\\iview-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\86152\\Desktop\\casual\\iview-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\86152\\Desktop\\casual\\iview-admin\\src\\components\\tables\\tables.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\86152\\Desktop\\casual\\iview-admin\\src\\components\\tables\\tables.vue","mtime":1575545426878},{"path":"C:\\Users\\86152\\Desktop\\casual\\iview-admin\\.babelrc","mtime":1575545426802},{"path":"C:\\Users\\86152\\Desktop\\casual\\iview-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86152\\Desktop\\casual\\iview-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\86152\\Desktop\\casual\\iview-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86152\\Desktop\\casual\\iview-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport TablesEdit from \"./edit.vue\";\nimport handleBtns from \"./handle-btns\";\nimport \"./index.less\";\nexport default {\n  name: 'Tables',\n  props: {\n    value: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    columns: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    size: String,\n    width: {\n      type: [Number, String]\n    },\n    height: {\n      type: [Number, String]\n    },\n    stripe: {\n      type: Boolean,\n      default: false\n    },\n    border: {\n      type: Boolean,\n      default: false\n    },\n    showHeader: {\n      type: Boolean,\n      default: true\n    },\n    highlightRow: {\n      type: Boolean,\n      default: false\n    },\n    rowClassName: {\n      type: Function,\n      default: function _default() {\n        return '';\n      }\n    },\n    context: {\n      type: Object\n    },\n    noDataText: {\n      type: String\n    },\n    noFilteredDataText: {\n      type: String\n    },\n    disabledHover: {\n      type: Boolean\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n\n    /**\r\n     * @description 全局设置是否可编辑\r\n     */\n    editable: {\n      type: Boolean,\n      default: false\n    },\n\n    /**\r\n     * @description 是否可搜索\r\n     */\n    searchable: {\n      type: Boolean,\n      default: false\n    },\n\n    /**\r\n     * @description 搜索控件所在位置，'top' / 'bottom'\r\n     */\n    searchPlace: {\n      type: String,\n      default: 'top'\n    }\n  },\n\n  /**\r\n   * Events\r\n   * @on-start-edit 返回值 {Object} ：同iview中render函数中的params对象 { row, index, column }\r\n   * @on-cancel-edit 返回值 {Object} 同上\r\n   * @on-save-edit 返回值 {Object} ：除上面三个参数外，还有一个value: 修改后的数据\r\n   */\n  data: function data() {\n    return {\n      insideColumns: [],\n      insideTableData: [],\n      edittingCellId: '',\n      edittingText: '',\n      searchValue: '',\n      searchKey: ''\n    };\n  },\n  methods: {\n    suportEdit: function suportEdit(item, index) {\n      var _this = this;\n\n      item.render = function (h, params) {\n        return h(TablesEdit, {\n          props: {\n            params: params,\n            value: _this.insideTableData[params.index][params.column.key],\n            edittingCellId: _this.edittingCellId,\n            editable: _this.editable\n          },\n          on: {\n            'input': function input(val) {\n              _this.edittingText = val;\n            },\n            'on-start-edit': function onStartEdit(params) {\n              _this.edittingCellId = \"editting-\".concat(params.index, \"-\").concat(params.column.key);\n\n              _this.$emit('on-start-edit', params);\n            },\n            'on-cancel-edit': function onCancelEdit(params) {\n              _this.edittingCellId = '';\n\n              _this.$emit('on-cancel-edit', params);\n            },\n            'on-save-edit': function onSaveEdit(params) {\n              _this.value[params.row.initRowIndex][params.column.key] = _this.edittingText;\n\n              _this.$emit('input', _this.value);\n\n              _this.$emit('on-save-edit', Object.assign(params, {\n                value: _this.edittingText\n              }));\n\n              _this.edittingCellId = '';\n            }\n          }\n        });\n      };\n\n      return item;\n    },\n    surportHandle: function surportHandle(item) {\n      var _this2 = this;\n\n      var options = item.options || [];\n      var insideBtns = [];\n      options.forEach(function (item) {\n        if (handleBtns[item]) insideBtns.push(handleBtns[item]);\n      });\n      var btns = item.button ? [].concat(insideBtns, item.button) : insideBtns;\n\n      item.render = function (h, params) {\n        params.tableData = _this2.value;\n        return h('div', btns.map(function (item) {\n          return item(h, params, _this2);\n        }));\n      };\n\n      return item;\n    },\n    handleColumns: function handleColumns(columns) {\n      var _this3 = this;\n\n      this.insideColumns = columns.map(function (item, index) {\n        var res = item;\n        if (res.editable) res = _this3.suportEdit(res, index);\n        if (res.key === 'handle') res = _this3.surportHandle(res);\n        return res;\n      });\n    },\n    setDefaultSearchKey: function setDefaultSearchKey() {\n      this.searchKey = this.columns[0].key !== 'handle' ? this.columns[0].key : this.columns.length > 1 ? this.columns[1].key : '';\n    },\n    handleClear: function handleClear(e) {\n      if (e.target.value === '') this.insideTableData = this.value;\n    },\n    handleSearch: function handleSearch() {\n      var _this4 = this;\n\n      this.insideTableData = this.value.filter(function (item) {\n        return item[_this4.searchKey].indexOf(_this4.searchValue) > -1;\n      });\n    },\n    handleTableData: function handleTableData() {\n      this.insideTableData = this.value.map(function (item, index) {\n        var res = item;\n        res.initRowIndex = index;\n        return res;\n      });\n    },\n    exportCsv: function exportCsv(params) {\n      this.$refs.tablesMain.exportCsv(params);\n    },\n    clearCurrentRow: function clearCurrentRow() {\n      this.$refs.talbesMain.clearCurrentRow();\n    },\n    onCurrentChange: function onCurrentChange(currentRow, oldCurrentRow) {\n      this.$emit('on-current-change', currentRow, oldCurrentRow);\n    },\n    onSelect: function onSelect(selection, row) {\n      this.$emit('on-select', selection, row);\n    },\n    onSelectCancel: function onSelectCancel(selection, row) {\n      this.$emit('on-select-cancel', selection, row);\n    },\n    onSelectAll: function onSelectAll(selection) {\n      this.$emit('on-select-all', selection);\n    },\n    onSelectionChange: function onSelectionChange(selection) {\n      this.$emit('on-selection-change', selection);\n    },\n    onSortChange: function onSortChange(column, key, order) {\n      this.$emit('on-sort-change', column, key, order);\n    },\n    onFilterChange: function onFilterChange(row) {\n      this.$emit('on-filter-change', row);\n    },\n    onRowClick: function onRowClick(row, index) {\n      this.$emit('on-row-click', row, index);\n    },\n    onRowDblclick: function onRowDblclick(row, index) {\n      this.$emit('on-row-dblclick', row, index);\n    },\n    onExpand: function onExpand(row, status) {\n      this.$emit('on-expand', row, status);\n    }\n  },\n  watch: {\n    columns: function columns(_columns) {\n      this.handleColumns(_columns);\n      this.setDefaultSearchKey();\n    },\n    value: function value(val) {\n      this.handleTableData();\n      if (this.searchable) this.handleSearch();\n    }\n  },\n  mounted: function mounted() {\n    this.handleColumns(this.columns);\n    this.setDefaultSearchKey();\n    this.handleTableData();\n  }\n};",{"version":3,"sources":["tables.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <div v-if=\"searchable && searchPlace === 'top'\" class=\"search-con search-con-top\">\r\n      <Select v-model=\"searchKey\" class=\"search-col\">\r\n        <Option v-for=\"item in columns\" v-if=\"item.key !== 'handle'\" :value=\"item.key\" :key=\"`search-col-${item.key}`\">{{ item.title }}</Option>\r\n      </Select>\r\n      <Input @on-change=\"handleClear\" clearable placeholder=\"输入关键字搜索\" class=\"search-input\" v-model=\"searchValue\"/>\r\n      <Button @click=\"handleSearch\" class=\"search-btn\" type=\"primary\"><Icon type=\"search\"/>&nbsp;&nbsp;搜索</Button>\r\n    </div>\r\n    <Table\r\n      ref=\"tablesMain\"\r\n      :data=\"insideTableData\"\r\n      :columns=\"insideColumns\"\r\n      :stripe=\"stripe\"\r\n      :border=\"border\"\r\n      :show-header=\"showHeader\"\r\n      :width=\"width\"\r\n      :height=\"height\"\r\n      :loading=\"loading\"\r\n      :disabled-hover=\"disabledHover\"\r\n      :highlight-row=\"highlightRow\"\r\n      :row-class-name=\"rowClassName\"\r\n      :size=\"size\"\r\n      :no-data-text=\"noDataText\"\r\n      :no-filtered-data-text=\"noFilteredDataText\"\r\n      @on-current-change=\"onCurrentChange\"\r\n      @on-select=\"onSelect\"\r\n      @on-select-cancel=\"onSelectCancel\"\r\n      @on-select-all=\"onSelectAll\"\r\n      @on-selection-change=\"onSelectionChange\"\r\n      @on-sort-change=\"onSortChange\"\r\n      @on-filter-change=\"onFilterChange\"\r\n      @on-row-click=\"onRowClick\"\r\n      @on-row-dblclick=\"onRowDblclick\"\r\n      @on-expand=\"onExpand\"\r\n    >\r\n      <slot name=\"header\" slot=\"header\"></slot>\r\n      <slot name=\"footer\" slot=\"footer\"></slot>\r\n      <slot name=\"loading\" slot=\"loading\"></slot>\r\n    </Table>\r\n    <div v-if=\"searchable && searchPlace === 'bottom'\" class=\"search-con search-con-top\">\r\n      <Select v-model=\"searchKey\" class=\"search-col\">\r\n        <Option v-for=\"item in columns\" v-if=\"item.key !== 'handle'\" :value=\"item.key\" :key=\"`search-col-${item.key}`\">{{ item.title }}</Option>\r\n      </Select>\r\n      <Input placeholder=\"输入关键字搜索\" class=\"search-input\" v-model=\"searchValue\"/>\r\n      <Button class=\"search-btn\" type=\"primary\"><Icon type=\"search\"/>&nbsp;&nbsp;搜索</Button>\r\n    </div>\r\n    <a id=\"hrefToExportTable\" style=\"display: none;width: 0px;height: 0px;\"></a>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TablesEdit from './edit.vue'\r\nimport handleBtns from './handle-btns'\r\nimport './index.less'\r\nexport default {\r\n  name: 'Tables',\r\n  props: {\r\n    value: {\r\n      type: Array,\r\n      default () {\r\n        return []\r\n      }\r\n    },\r\n    columns: {\r\n      type: Array,\r\n      default () {\r\n        return []\r\n      }\r\n    },\r\n    size: String,\r\n    width: {\r\n      type: [Number, String]\r\n    },\r\n    height: {\r\n      type: [Number, String]\r\n    },\r\n    stripe: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    border: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    showHeader: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    highlightRow: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    rowClassName: {\r\n      type: Function,\r\n      default () {\r\n        return ''\r\n      }\r\n    },\r\n    context: {\r\n      type: Object\r\n    },\r\n    noDataText: {\r\n      type: String\r\n    },\r\n    noFilteredDataText: {\r\n      type: String\r\n    },\r\n    disabledHover: {\r\n      type: Boolean\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    /**\r\n     * @description 全局设置是否可编辑\r\n     */\r\n    editable: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    /**\r\n     * @description 是否可搜索\r\n     */\r\n    searchable: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    /**\r\n     * @description 搜索控件所在位置，'top' / 'bottom'\r\n     */\r\n    searchPlace: {\r\n      type: String,\r\n      default: 'top'\r\n    }\r\n  },\r\n  /**\r\n   * Events\r\n   * @on-start-edit 返回值 {Object} ：同iview中render函数中的params对象 { row, index, column }\r\n   * @on-cancel-edit 返回值 {Object} 同上\r\n   * @on-save-edit 返回值 {Object} ：除上面三个参数外，还有一个value: 修改后的数据\r\n   */\r\n  data () {\r\n    return {\r\n      insideColumns: [],\r\n      insideTableData: [],\r\n      edittingCellId: '',\r\n      edittingText: '',\r\n      searchValue: '',\r\n      searchKey: ''\r\n    }\r\n  },\r\n  methods: {\r\n    suportEdit (item, index) {\r\n      item.render = (h, params) => {\r\n        return h(TablesEdit, {\r\n          props: {\r\n            params: params,\r\n            value: this.insideTableData[params.index][params.column.key],\r\n            edittingCellId: this.edittingCellId,\r\n            editable: this.editable\r\n          },\r\n          on: {\r\n            'input': val => {\r\n              this.edittingText = val\r\n            },\r\n            'on-start-edit': (params) => {\r\n              this.edittingCellId = `editting-${params.index}-${params.column.key}`\r\n              this.$emit('on-start-edit', params)\r\n            },\r\n            'on-cancel-edit': (params) => {\r\n              this.edittingCellId = ''\r\n              this.$emit('on-cancel-edit', params)\r\n            },\r\n            'on-save-edit': (params) => {\r\n              this.value[params.row.initRowIndex][params.column.key] = this.edittingText\r\n              this.$emit('input', this.value)\r\n              this.$emit('on-save-edit', Object.assign(params, { value: this.edittingText }))\r\n              this.edittingCellId = ''\r\n            }\r\n          }\r\n        })\r\n      }\r\n      return item\r\n    },\r\n    surportHandle (item) {\r\n      let options = item.options || []\r\n      let insideBtns = []\r\n      options.forEach(item => {\r\n        if (handleBtns[item]) insideBtns.push(handleBtns[item])\r\n      })\r\n      let btns = item.button ? [].concat(insideBtns, item.button) : insideBtns\r\n      item.render = (h, params) => {\r\n        params.tableData = this.value\r\n        return h('div', btns.map(item => item(h, params, this)))\r\n      }\r\n      return item\r\n    },\r\n    handleColumns (columns) {\r\n      this.insideColumns = columns.map((item, index) => {\r\n        let res = item\r\n        if (res.editable) res = this.suportEdit(res, index)\r\n        if (res.key === 'handle') res = this.surportHandle(res)\r\n        return res\r\n      })\r\n    },\r\n    setDefaultSearchKey () {\r\n      this.searchKey = this.columns[0].key !== 'handle' ? this.columns[0].key : (this.columns.length > 1 ? this.columns[1].key : '')\r\n    },\r\n    handleClear (e) {\r\n      if (e.target.value === '') this.insideTableData = this.value\r\n    },\r\n    handleSearch () {\r\n      this.insideTableData = this.value.filter(item => item[this.searchKey].indexOf(this.searchValue) > -1)\r\n    },\r\n    handleTableData () {\r\n      this.insideTableData = this.value.map((item, index) => {\r\n        let res = item\r\n        res.initRowIndex = index\r\n        return res\r\n      })\r\n    },\r\n    exportCsv (params) {\r\n      this.$refs.tablesMain.exportCsv(params)\r\n    },\r\n    clearCurrentRow () {\r\n      this.$refs.talbesMain.clearCurrentRow()\r\n    },\r\n    onCurrentChange (currentRow, oldCurrentRow) {\r\n      this.$emit('on-current-change', currentRow, oldCurrentRow)\r\n    },\r\n    onSelect (selection, row) {\r\n      this.$emit('on-select', selection, row)\r\n    },\r\n    onSelectCancel (selection, row) {\r\n      this.$emit('on-select-cancel', selection, row)\r\n    },\r\n    onSelectAll (selection) {\r\n      this.$emit('on-select-all', selection)\r\n    },\r\n    onSelectionChange (selection) {\r\n      this.$emit('on-selection-change', selection)\r\n    },\r\n    onSortChange (column, key, order) {\r\n      this.$emit('on-sort-change', column, key, order)\r\n    },\r\n    onFilterChange (row) {\r\n      this.$emit('on-filter-change', row)\r\n    },\r\n    onRowClick (row, index) {\r\n      this.$emit('on-row-click', row, index)\r\n    },\r\n    onRowDblclick (row, index) {\r\n      this.$emit('on-row-dblclick', row, index)\r\n    },\r\n    onExpand (row, status) {\r\n      this.$emit('on-expand', row, status)\r\n    }\r\n  },\r\n  watch: {\r\n    columns (columns) {\r\n      this.handleColumns(columns)\r\n      this.setDefaultSearchKey()\r\n    },\r\n    value (val) {\r\n      this.handleTableData()\r\n      if (this.searchable) this.handleSearch()\r\n    }\r\n  },\r\n  mounted () {\r\n    this.handleColumns(this.columns)\r\n    this.setDefaultSearchKey()\r\n    this.handleTableData()\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/components/tables"}]}